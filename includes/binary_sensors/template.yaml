- platform: template
  sensors:
    is_workday:
      value_template: >
        {% if is_state('input_boolean.is_vacation', 'on') %}
          false
        {% elif 
          states.sensor.date.state.endswith('01-01') or
          states.sensor.date.state.endswith('05-01') or
          states.sensor.date.state.endswith('05-04') or
          states.sensor.date.state.endswith('06-23') or
          states.sensor.date.state.endswith('06-24') or
          states.sensor.date.state.endswith('11-18') or
          states.sensor.date.state.endswith('12-24') or
          states.sensor.date.state.endswith('12-24') or
          states.sensor.date.state.endswith('12-31')
        %}
          false
        {% elif 
          states.sensor.date.state.endswith('2019-04-19') or
          states.sensor.date.state.endswith('2019-04-22') or
          states.sensor.date.state.endswith('2019-05-06')
        %}
          false
        {% else %}
          {{ now().weekday() >= 0 and now().weekday() <= 4 }}
        {% endif %}
      entity_id: 
        - now.weekday
        - input_boolean.is_vacation

    ping_tv:
      value_template: "{{ states.sensor.power_strip_4_load_power.state | float > 80 }}"
      entity_id: sensor.power_strip_4_load_power

    people_home:
      value_template: >
        {{
        is_state('light.big_torch', 'on') or
        is_state('light.corner_lamp', 'on') or
        is_state('binary_sensor.ping_computer', 'on') or
        is_state('binary_sensor.ping_laptop', 'on') or
        is_state('binary_sensor.ping_tv', 'on') or
        is_state('media_player.kitchen_display', 'playing') or
        is_state('media_player.loud_speaker', 'playing') or
        is_state('media_player.yury_speaker', 'playing')
        }}
      entity_id:
        - light.big_torch
        - light.corner_lamp
        - binary_sensor.ping_computer
        - binary_sensor.ping_laptop
        - binary_sensor.ping_tv
        - media_player.kitchen_display
        - media_player.loud_speaker
        - media_player.yury_speaker

    ping_abox:
      value_template: >
        {{
        not(
        is_state('sensor.abox_app', 'launcher') or
        is_state('sensor.abox_app', 'unknown')
        )
        }}
      entity_id:
        - sensor.abox_app
        - media_player.abox